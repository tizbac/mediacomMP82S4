/**************************************************************
使用前注意通道数，驱动默认使用通道是sense 
大于drive否则需要将使用到的DRIVENO与SENSENO调换
此情况包括0x66和0x67寄存器，但不必修改。
***************************************************************/

#define DRIVENO	23
#define SENSENO	31
#define ENABLE_INT		2	// 0->Polling, 1->Interupt, 2->Hybrid
#define EdgeDisable		1	// if Edge Disable, set it to 1, else reset to 0, OR  SSD2533 set 0
#define RunningAverageMode	2	//{0,8},{5,3},{6,2},{7,1}
#define RunningAverageDist	4	// Threshold Between two consecutive points
#define MicroTimeTInterupt	25000000// 100Hz - 10,000,000us

#define FINGERNO	5

// gpio base address
#define PIO_BASE_ADDRESS             (0x01c20800)
#define PIO_RANGE_SIZE               (0x400)
#define IRQ_EINT21                   (21) 
#define IRQ_EINT29                   (29) 
#define PIO_INT_STAT_OFFSET          (0x214)
#define PIO_INT_CTRL_OFFSET          (0x210)
#define PIO_INT_CFG2_OFFSET          (0x208)
#define PIO_INT_CFG3_OFFSET          (0x20c)

#define IRQ_EINT21                   (21) 
#define IRQ_EINT29                   (29)

#define SSD253x_TOUCH_KEY
#undef SSD253x_TOUCH_KEY            //touch pandel support;

struct ChipSetting {
	char No;
	char Reg;
	char Data1;
	char Data2;
};

#ifdef SSD253x_TOUCH_KEY
//static uint32_t key_code[4] = {KEY_MENU, KEY_HOME, KEY_BACK, KEY_SEARCH }; 
#endif


#define SSD253x_CUT_EDGE    //0x8b must be 0x00;  EdgeDisable set 0
#undef  SSD253x_CUT_EDGE            //15X10 changle open this define； 

#ifdef SSD253x_CUT_EDGE
		//#define XPOS_MAX (DRIVENO -EdgeDisable) *64
		//#define YPOS_MAX (SENSENO -EdgeDisable) *64
#endif

// SSD2533 Setting
// Touch Panel Example
struct ChipSetting ssd253xcfgTable9_7[]={	
{ 1, 0x06, 0x16, 0x00},	
{ 1, 0x06, 0x16, 0x00},	
{ 1, 0x07, 0x1a, 0x00},	
{ 2, 0x08, 0x00, 0x36},	
{ 2, 0x09, 0x00, 0x35},	
{ 2, 0x0A, 0x00, 0x34},	
{ 2, 0x0B, 0x00, 0x33},	
{ 2, 0x0C, 0x00, 0x32},	
{ 2, 0x0D, 0x00, 0x31},	
{ 2, 0x0E, 0x00, 0x30},	
{ 2, 0x0F, 0x00, 0x2f},	
{ 2, 0x10, 0x00, 0X2e},	
{ 2, 0x11, 0x00, 0x2d},	
{ 2, 0x12, 0x00, 0x2c},	
{ 2, 0x13, 0x00, 0x2b},	
{ 2, 0x14, 0x00, 0x20},	
{ 2, 0x15, 0x00, 0x21},	
{ 2, 0x16, 0x00, 0x22},	
{ 2, 0x17, 0x00, 0x23},
{ 2, 0x18, 0x00, 0x24},	
{ 2, 0x19, 0x00, 0x25},	
{ 2, 0x1a, 0x00, 0x26},	
{ 2, 0x1b, 0x00, 0x27},	
{ 2, 0x1c, 0x00, 0x28},	
{ 2, 0x1d, 0x00, 0x29},	
{ 2, 0x1e, 0x00, 0x2a},
{ 1, 0x1F, 0x01, 0x00},
{ 1, 0xD5, 0x05, 0x00},
{ 1, 0xD8, 0x02, 0x00},			
{ 1, 0x2A, 0x07, 0x00},			
{ 1, 0x2C, 0x01, 0x00},			
{ 1, 0x2E, 0x0B, 0x00},			
{ 1, 0x2F, 0x01, 0x00},	
{ 1, 0x30, 0x06, 0x00},			
{ 1, 0x31, 0x09, 0x00},	
{ 1, 0xD8, 0x05, 0x00},	
{ 1, 0xD7, 0x05, 0x00},			
{ 1, 0xDB, 0x00, 0x00},			
{ 2, 0x33, 0x00, 0x01},			
{ 2, 0X34, 0X00, 0x50},
{ 2, 0x35, 0x00, 0x40},			
{ 2, 0x36, 0x00, 0x18},			
{ 1, 0x37, 0x00, 0x00},			
{ 1, 0x39, 0x02, 0x00},	
{ 1, 0x53, 0x30, 0x00},			
{ 2, 0X54, 0X01, 0x00},
{ 2, 0x55, 0x01, 0x00},	
{ 1, 0x5B, 0x20, 0x00},
{ 2, 0x5e, 0x01, 0x00},
{ 1, 0x3D, 0x02, 0x00},	
{ 1, 0x40, 0xA0, 0x00},			
{ 1, 0x44, 0x01, 0x00},
{ 1, 0x8a, 0x0a, 0x00},
{ 1, 0x8b, 0x01, 0x00},
{ 1, 0x65, 0x00, 0x00},
{ 2, 0X66, 0x97, 0xaa},
{ 2, 0X67, 0x85, 0x88},
{ 2, 0x7A, 0xFF, 0xFF},
{ 2, 0x7B, 0x00, 0x00},
{ 1, 0x25, 0x0A, 0x00},	
};

//0*****************10 inch  非纯平********************************//
/* Touch Panel Example table4 平贴TP
	can used for list below :
	RS10F100		//TP Key Disable //Module: RS10MD258
*/
struct ChipSetting ssd2533QN10_RS258_YF_cfg[]={
{1,0x06,0x13,0x00},
{1,0x06,0x13,0x00},
{1,0x07,0x23,0x00},
{2,0x08,0x00,0xe0},
{2,0x09,0x00,0xe1},
{2,0x0a,0x00,0xe2},
{2,0x0b,0x00,0xe3},
{2,0x0c,0x00,0xe4},
{2,0x0d,0x00,0xe5},
{2,0x0e,0x00,0xe6},
{2,0x0f,0x00,0xe7},
{2,0x10,0x00,0xe8},
{2,0x11,0x00,0xe9},
{2,0x12,0x00,0x8a},
{2,0x13,0x00,0x8b},
{2,0x14,0x00,0x8c},
{2,0x15,0x00,0x8d},
{2,0x16,0x00,0x4e},
{2,0x17,0x00,0x4f},
{2,0x18,0x00,0x70},
{2,0x19,0x00,0x71},
{2,0x1a,0x00,0x72},
{2,0x1b,0x00,0x73},
{1,0x1f,0x01,0x00},
{1,0xd5,0x05,0x00},
{1,0xd4,0x07,0x00},
{1,0xd8,0x05,0x00},
{1,0x2a,0x0f,0x00},
{1,0x2c,0x01,0x00},
{1,0x2e,0x07,0x00},
{1,0x2f,0x01,0x00},
{1,0x30,0x04,0x00},
{1,0x31,0x09,0x00},
{1,0xd7,0x04,0x00},
{1,0xdb,0x04,0x00},
{2,0x33,0x00,0x01},
{2,0x34,0x00,0x30},//0x64
{2,0x35,0x00,0x30},
{2,0x36,0x00,0x20},
{1,0x37,0x02,0x00},
{1,0x38,0x00,0x00},
{1,0x39,0x02,0x00},
{1,0x3d,0x00,0x00},
{1,0x53,0x16,0x00},
{2,0x54,0x01,0x80},
{2,0x55,0x01,0x80},
{1,0x56,0x00,0x00},  //0x02
{1,0x5b,0x12,0x00},
{1,0x59,0x01,0x00},
{1,0x40,0xa0,0x00},
{1,0x44,0x01,0x00},
{1,0x8a,0x0a,0x00},
{1,0x65,0x00,0x00},
{2,0x66,0x74,0xF0},
{2,0x67,0x7E,0x38},
{2,0x7a,0xff,0xff},
{2,0x7b,0xc0,0x07},
{1,0x8b,0x00,0x00},
{1,0xab,0xa0,0x00},
{1,0xac,0x01,0x00},
{1,0xad,0x03,0x00},
{1,0xae,0x0f,0x00},
{1,0xaf,0x58,0x00},
{1,0xb0,0x00,0x00},
{1,0xbb,0x55,0x00},
{1,0xbc,0x00,0x00},
{1,0x25,0x0f,0x00},
};

struct ChipSetting ssd2533QN10_RS258_YF_ES5_cfg[]={
{1,0x06,0x13,0x00},
{1,0x06,0x13,0x00},
{1,0x07,0x23,0x00},
{2,0x08,0x00,0xe0},
{2,0x09,0x00,0xe1},
{2,0x0a,0x00,0xe2},
{2,0x0b,0x00,0xe3},
{2,0x0c,0x00,0xe4},
{2,0x0d,0x00,0xe5},
{2,0x0e,0x00,0xe6},
{2,0x0f,0x00,0xe7},
{2,0x10,0x00,0xe8},
{2,0x11,0x00,0xe9},
{2,0x12,0x00,0x8a},
{2,0x13,0x00,0x8b},
{2,0x14,0x00,0x8c},
{2,0x15,0x00,0x8d},
{2,0x16,0x00,0x4e},
{2,0x17,0x00,0x4f},
{2,0x18,0x00,0x70},
{2,0x19,0x00,0x71},
{2,0x1a,0x00,0x72},
{2,0x1b,0x00,0x73},
{1,0x1f,0x01,0x00},
{1,0xd5,0x05,0x00},
{1,0xd4,0x07,0x00},
{1,0xd8,0x05,0x00},
{1,0x2a,0x0f,0x00},
{1,0x2c,0x01,0x00},
{1,0x2e,0x07,0x00},
{1,0x2f,0x01,0x00},
{1,0x30,0x04,0x00},
{1,0x31,0x09,0x00},
{1,0xd7,0x04,0x00},
{1,0xdb,0x04,0x00},
{2,0x33,0x00,0x01},
{2,0x34,0x00,0x64},
{2,0x35,0x00,0x50},
{2,0x36,0x00,0x20},
{1,0x37,0x02,0x00},
{1,0x38,0x00,0x00},
{1,0x39,0x02,0x00},
{1,0x3d,0x00,0x00},
{1,0x53,0x16,0x00},
{2,0x54,0x01,0x80},
{2,0x55,0x01,0x80},
{1,0x56,0x01,0x00},  //0x02
{1,0x5b,0x12,0x00},
{1,0x59,0x01,0x00},
{1,0x40,0xa0,0x00},
{1,0x41,0x30,0x00},
{1,0x42,0x30,0x00},
{2,0x43,0x01,0xD4},
{1,0x44,0x01,0x00},
{1,0x8a,0x0a,0x00},
{1,0x65,0x00,0x00},
{2,0x66,0x74,0xF0},
{2,0x67,0x7E,0x38},
{2,0x7a,0xff,0xff},
{2,0x7b,0xc0,0x07},
{1,0x8b,0x00,0x00},
{1,0xab,0xa0,0x00},
{1,0xac,0x01,0x00},
{1,0xad,0x03,0x00},
{1,0xae,0x0f,0x00},
{1,0xaf,0x58,0x00},
{1,0xb0,0x00,0x00},
{1,0xbb,0x55,0x00},
{1,0xbc,0x00,0x00},
{1,0x25,0x0f,0x00},
};


//1*****************10 inch  纯平********************************//
/* Touch Panel Example table4 平贴TP
	can used for list below :
	RS10F100		//TP Key Disable //Module: RS10MD258
*/
struct ChipSetting ssd2533QN10_RS258_YF_cfg_flat[]={
{1,0x06,0x13,0x00},
{1,0x06,0x13,0x00},
{1,0x07,0x23,0x00},
{2,0x08,0x00,0xe0},
{2,0x09,0x00,0xe1},
{2,0x0a,0x00,0xe2},
{2,0x0b,0x00,0xe3},
{2,0x0c,0x00,0xe4},
{2,0x0d,0x00,0xe5},
{2,0x0e,0x00,0xe6},
{2,0x0f,0x00,0xe7},
{2,0x10,0x00,0xe8},
{2,0x11,0x00,0xe9},
{2,0x12,0x00,0x8a},
{2,0x13,0x00,0x8b},
{2,0x14,0x00,0x8c},
{2,0x15,0x00,0x8d},
{2,0x16,0x00,0x4e},
{2,0x17,0x00,0x4f},
{2,0x18,0x00,0x70},
{2,0x19,0x00,0x71},
{2,0x1a,0x00,0x72},
{2,0x1b,0x00,0x73},
{1,0x1f,0x01,0x00},
{1,0xd5,0x05,0x00},
{1,0xd4,0x07,0x00},
{1,0xd8,0x04,0x00},
{1,0x2a,0x0f,0x00},
{1,0x2c,0x01,0x00},
{1,0x2e,0x07,0x00},
{1,0x2f,0x01,0x00},
{1,0x30,0x04,0x00},
{1,0x31,0x08,0x00},
{1,0xd7,0x04,0x00},
{1,0xdb,0x02,0x00},
{2,0x33,0x00,0x01},
{2,0x34,0x00,0x45},
{2,0x35,0x00,0x30},
{2,0x36,0x00,0x20},
{1,0x37,0x00,0x00},
{1,0x38,0x00,0x00},
{1,0x39,0x02,0x00},
{1,0x3d,0x02,0x00},
{1,0x53,0x16,0x00},
{2,0x54,0x01,0x90},
{2,0x55,0x01,0x90},
{1,0x56,0x02,0x00},
{1,0x5b,0x12,0x00},
{1,0x59,0x01,0x00},
{1,0x40,0xa0,0x00},
{1,0x44,0x01,0x00},
{1,0x8a,0x0a,0x00},
{1,0x65,0x00,0x00},
{2,0x66,0x73,0xa1},
{2,0x67,0x7b,0xc2},
{1,0x68,0x06,0x00},
{1,0x69,0x06,0x00},
{2,0x7a,0xff,0xff},
{2,0x7b,0xc0,0x07},
{1,0x8b,0x00,0x00},
{1,0xab,0xa0,0x00},
{1,0xac,0x01,0x00},
{1,0xad,0x03,0x00},
{1,0xae,0x0f,0x00},
{1,0xaf,0x58,0x00},
{1,0xb0,0x00,0x00},
{1,0xbb,0x55,0x00},
{1,0xbc,0x00,0x00},
{1,0x25,0x0f,0x00},
};

struct ChipSetting ssd2533QN10_RS258_YF_ES5_cfg_flat[]={
{1,0x06,0x13,0x00},
{1,0x06,0x13,0x00},
{1,0x07,0x23,0x00},
{2,0x08,0x00,0xe0},
{2,0x09,0x00,0xe1},
{2,0x0a,0x00,0xe2},
{2,0x0b,0x00,0xe3},
{2,0x0c,0x00,0xe4},
{2,0x0d,0x00,0xe5},
{2,0x0e,0x00,0xe6},
{2,0x0f,0x00,0xe7},
{2,0x10,0x00,0xe8},
{2,0x11,0x00,0xe9},
{2,0x12,0x00,0x8a},
{2,0x13,0x00,0x8b},
{2,0x14,0x00,0x8c},
{2,0x15,0x00,0x8d},
{2,0x16,0x00,0x4e},
{2,0x17,0x00,0x4f},
{2,0x18,0x00,0x70},
{2,0x19,0x00,0x71},
{2,0x1a,0x00,0x72},
{2,0x1b,0x00,0x73},
{1,0x1f,0x01,0x00},
{1,0xd5,0x05,0x00},
{1,0xd4,0x07,0x00},
{1,0xd8,0x04,0x00},
{1,0x2a,0x0f,0x00},
{1,0x2c,0x01,0x00},
{1,0x2e,0x07,0x00},
{1,0x2f,0x01,0x00},
{1,0x30,0x04,0x00},
{1,0x31,0x08,0x00},
{1,0xd7,0x04,0x00},
{1,0xdb,0x02,0x00},
{2,0x33,0x00,0x01},
{2,0x34,0x00,0x45},
{2,0x35,0x00,0x30},
{2,0x36,0x00,0x20},
{1,0x37,0x00,0x00},
{1,0x38,0x00,0x00},
{1,0x39,0x02,0x00},
{1,0x3d,0x02,0x00},
{1,0x53,0x16,0x00},
{2,0x54,0x01,0x90},
{2,0x55,0x01,0x90},
{1,0x56,0x02,0x00},
{1,0x5b,0x12,0x00},
{1,0x59,0x01,0x00},
{1,0x40,0xa0,0x00},
{1,0x44,0x01,0x00},
{1,0x8a,0x0a,0x00},
{1,0x65,0x00,0x00},
{2,0x66,0x73,0xa1},
{2,0x67,0x7b,0xc2},
{1,0x68,0x06,0x00},
{1,0x69,0x06,0x00},
{2,0x7a,0xff,0xff},
{2,0x7b,0xc0,0x07},
{1,0x8b,0x00,0x00},
{1,0xab,0xa0,0x00},
{1,0xac,0x01,0x00},
{1,0xad,0x03,0x00},
{1,0xae,0x0f,0x00},
{1,0xaf,0x58,0x00},
{1,0xb0,0x00,0x00},
{1,0xbb,0x55,0x00},
{1,0xbc,0x00,0x00},
{1,0x25,0x0f,0x00},
/*
{1,0x06,0x13,0x00},
{1,0x06,0x13,0x00},
{1,0x07,0x23,0x00},
{2,0x08,0x00,0xe0},
{2,0x09,0x00,0xe1},
{2,0x0a,0x00,0xe2},
{2,0x0b,0x00,0xe3},
{2,0x0c,0x00,0xe4},
{2,0x0d,0x00,0xe5},
{2,0x0e,0x00,0xe6},
{2,0x0f,0x00,0xe7},
{2,0x10,0x00,0xe8},
{2,0x11,0x00,0xe9},
{2,0x12,0x00,0x8a},
{2,0x13,0x00,0x8b},
{2,0x14,0x00,0x8c},
{2,0x15,0x00,0x8d},
{2,0x16,0x00,0x8e},
{2,0x17,0x00,0x8f},
{2,0x18,0x00,0x70},
{2,0x19,0x00,0x71},
{2,0x1a,0x00,0x72},
{2,0x1b,0x00,0x73},
{1,0x1f,0x01,0x00},
{1,0xd5,0x05,0x00},
{1,0xd4,0x06,0x00},
{1,0xd8,0x03,0x00},
{1,0x2a,0x0f,0x00},
{1,0x2c,0x01,0x00},
{1,0x2e,0x07,0x00},
{1,0x2f,0x01,0x00},
{1,0x30,0x04,0x00},
{1,0x31,0x0a,0x00},
{1,0xd7,0x04,0x00},
{1,0xdb,0x03,0x00},
{2,0x33,0x00,0x01},
{2,0x34,0x00,0x48},
{2,0x35,0x00,0x30},
{2,0x36,0x00,0x20},
{1,0x37,0x05,0x00},
{1,0x38,0x01,0x00},
{1,0x39,0x02,0x00},
{1,0x3d,0x00,0x00},
{1,0x53,0x16,0x00},
{2,0x54,0x01,0x90},
{2,0x55,0x01,0x90},
{1,0x56,0x00,0x02},
{1,0x5b,0x12,0x00},
{1,0x59,0x01,0x00},
{1,0x40,0xa0,0x00},
{1,0x44,0x01,0x00},
{1,0x65,0x00,0x00},
{2,0x66,0x74,0xf0},
{2,0x67,0x7e,0x38},
{2,0x7a,0xff,0xff},
{2,0x7b,0xc0,0x07},
{1,0x8a,0x0a,0x00},
{1,0x8b,0x00,0x00},
{1,0xab,0xa0,0x00},
{1,0xac,0x01,0x00},
{1,0xad,0x03,0x00},
{1,0xae,0x0f,0x00},
{1,0xaf,0x58,0x00},
{1,0xb0,0x00,0x00},
{1,0xbb,0x55,0x00},
{1,0xbc,0x00,0x00},
{1,0x25,0x0f,0x00},
*/
};

// For SSD2533 Bug Version Only //
//#define	SSD2533FIXEDCODE
struct ChipSetting ssd253xcfgTable1_9_7[]={
{ 1, 0xA4, 0x00, 0x00},			//MCU prescaler default=01
{ 1, 0xD4, 0x08, 0x00},			//Dummy Code
{ 1, 0xD4, 0x08, 0x00},			//Set Osc frequency default=8, range 0 to F
};

struct ChipSetting Reset[]={
{ 0, 0x04, 0x00, 0x00},	// SSD2533
};

struct ChipSetting Resume[]={
{ 0, 0x04, 0x00, 0x00},	// SSD2533
{ 1, 0x25, 0x0A, 0x00}, // Set Operation Mode   //Set from int setting
};

struct ChipSetting Suspend[] ={
{ 1, 0x25, 0x00, 0x00}, // Set Operation Mode
{ 0, 0x05, 0x00, 0x00},	// SSD2533
};

